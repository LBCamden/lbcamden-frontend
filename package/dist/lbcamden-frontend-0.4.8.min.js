!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("LBCamdenFrontend",["exports"],t):t(e.LBCamdenFrontend={})}(this,function(e){"use strict";function n(e,t){if(window.NodeList.prototype.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t.call(window,e[n],n,e)}const t={minWidth:"40.0625em",desktop:"48em"};var o;undefined,o=function(){!function(e){"Window"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&!function(e){e.constructor?e.Window=e.constructor:(e.Window=e.constructor=new Function("return function Window() {}")()).prototype=this}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(e){"Document"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document))}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(e){var t,n,c,l,s,u,o,i,r;function a(){return r--||clearTimeout(i),!(!document.body||document.body.prototype||!/(complete|interactive)/.test(document.readyState)||(s(document,!0),i&&document.body.prototype&&clearTimeout(i),!document.body.prototype))}"Element"in this&&"HTMLElement"in this||(window.Element&&!window.HTMLElement?window.HTMLElement=window.Element:(window.Element=window.HTMLElement=new Function("return function Element() {}")(),n=(t=document.appendChild(document.createElement("body"))).appendChild(document.createElement("iframe")).contentWindow.document,c=Element.prototype=n.appendChild(n.createElement("*")),l={},s=function(e,t){var n,o,i,r=e.childNodes||[],a=-1;if(1===e.nodeType&&e.constructor!==Element)for(n in e.constructor=Element,l)o=l[n],e[n]=o;for(;i=t&&r[++a];)s(i,t);return e},u=document.getElementsByTagName("*"),o=document.createElement,r=100,c.attachEvent("onpropertychange",function(e){for(var t,n=e.propertyName,o=!l.hasOwnProperty(n),i=c[n],r=l[n],a=-1;t=u[++a];)1!==t.nodeType||!o&&t[n]!==r||(t[n]=i);l[n]=i}),c.constructor=Element,c.hasAttribute||(c.hasAttribute=function(e){return null!==this.getAttribute(e)}),a()||(document.onreadystatechange=a,i=setInterval(a,25)),document.createElement=function(e){e=o(String(e).toLowerCase());return s(e)},document.removeChild(t)))}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(e){var a,c,l,s;"defineProperty"in Object&&function(){try{return Object.defineProperty({},"test",{value:42}),!0}catch(e){return!1}}()||(a=Object.defineProperty,c=Object.prototype.hasOwnProperty("__defineGetter__"),l="Getters & setters cannot be defined on this javascript engine",s="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function(e,t,n){if(a&&(e===window||e===document||e===Element.prototype||e instanceof Element))return a(e,t,n);if(null===e||!(e instanceof Object||"object"==typeof e))throw new TypeError("Object.defineProperty called on non-object");if(!(n instanceof Object))throw new TypeError("Property description must be an object");var t=String(t),o="value"in n||"writable"in n,i="get"in n&&typeof n.get,r="set"in n&&typeof n.set;if(i){if("function"!==i)throw new TypeError("Getter must be a function");if(!c)throw new TypeError(l);if(o)throw new TypeError(s);Object.__defineGetter__.call(e,t,n.get)}else e[t]=n.value;if(r){if("function"!==r)throw new TypeError("Setter must be a function");if(!c)throw new TypeError(l);if(o)throw new TypeError(s);Object.__defineSetter__.call(e,t,n.set)}return"value"in n&&(e[t]=n.value),e})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(r){var e,n;function c(e,t){for(var n=-1,o=e.length;++n<o;)if(n in e&&e[n]===t)return n;return-1}(function(e){if(!("Event"in e))return!1;if("function"==typeof e.Event)return!0;try{return new Event("click"),!0}catch(t){return!1}})(this)||(n={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1},"undefined"==typeof document)||"undefined"==typeof window||(e=window.Event&&window.Event.prototype||null,window.Event=Window.prototype.Event=function Event(e,t){var n,o,i;if(e)return"createEvent"in document?(n=document.createEvent("Event"),o=!(!t||t.bubbles===r)&&t.bubbles,i=!(!t||t.cancelable===r)&&t.cancelable,n.initEvent(e,o,i)):((n=document.createEventObject()).type=e,n.bubbles=!(!t||t.bubbles===r)&&t.bubbles,n.cancelable=!(!t||t.cancelable===r)&&t.cancelable),n;throw new Error("Not enough arguments")},e&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:e}),"createEvent"in document)||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function(){var a=this,e=arguments[0],t=arguments[1];if(a===window&&e in n)throw new Error("In IE8 the event: "+e+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");a._events||(a._events={}),a._events[e]||(a._events[e]=function(e){var t,n=a._events[e.type].list,o=n.slice(),i=-1,r=o.length;for(e.preventDefault=function(){!1!==e.cancelable&&(e.returnValue=!1)},e.stopPropagation=function(){e.cancelBubble=!0},e.stopImmediatePropagation=function(){e.cancelBubble=!0,e.cancelImmediate=!0},e.currentTarget=a,e.relatedTarget=e.fromElement||null,e.target=e.target||e.srcElement||a,e.timeStamp=(new Date).getTime(),e.clientX&&(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop);++i<r&&!e.cancelImmediate;)i in o&&-1!==c(n,t=o[i])&&"function"==typeof t&&t.call(a,e)},a._events[e].list=[],a.attachEvent&&a.attachEvent("on"+e,a._events[e])),a._events[e].list.push(t)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function(){var e,t=this,n=arguments[0];t._events&&t._events[n]&&t._events[n].list&&-1!==(e=c(t._events[n].list,arguments[1]))&&(t._events[n].list.splice(e,1),t._events[n].list.length||(t.detachEvent&&t.detachEvent("on"+n,t._events[n]),delete t._events[n]))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function(e){if(!arguments.length)throw new Error("Not enough arguments");if(!e||"string"!=typeof e.type)throw new Error("DOM Events Exception 0");var t,n=this,o=e.type;try{e.bubbles||(e.cancelBubble=!0,t=function(e){e.cancelBubble=!0,(n||window).detachEvent("on"+o,t)},this.attachEvent("on"+o,t)),this.fireEvent("on"+o,e)}catch(i){for(e.target=n;"_events"in(e.currentTarget=n)&&"function"==typeof n._events[o]&&n._events[o].call(n,e),"function"==typeof n["on"+o]&&n["on"+o].call(n,e),(n=9===n.nodeType?n.parentWindow:n.parentNode)&&!e.cancelBubble;);}return!0},document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))}))}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{})},("object"!=typeof e||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define("GOVUKFrontend",o):o(),undefined,o=function(){!function(e){var a,c,l,s;"defineProperty"in Object&&function(){try{return Object.defineProperty({},"test",{value:42}),!0}catch(e){return!1}}()||(a=Object.defineProperty,c=Object.prototype.hasOwnProperty("__defineGetter__"),l="Getters & setters cannot be defined on this javascript engine",s="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function(e,t,n){if(a&&(e===window||e===document||e===Element.prototype||e instanceof Element))return a(e,t,n);if(null===e||!(e instanceof Object||"object"==typeof e))throw new TypeError("Object.defineProperty called on non-object");if(!(n instanceof Object))throw new TypeError("Property description must be an object");var t=String(t),o="value"in n||"writable"in n,i="get"in n&&typeof n.get,r="set"in n&&typeof n.set;if(i){if("function"!==i)throw new TypeError("Getter must be a function");if(!c)throw new TypeError(l);if(o)throw new TypeError(s);Object.__defineGetter__.call(e,t,n.get)}else e[t]=n.value;if(r){if("function"!==r)throw new TypeError("Setter must be a function");if(!c)throw new TypeError(l);if(o)throw new TypeError(s);Object.__defineSetter__.call(e,t,n.set)}return"value"in n&&(e[t]=n.value),e})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(e){"bind"in Function.prototype||Object.defineProperty(Function.prototype,"bind",{value:function(t){var e=Array,n=Object,o=n.prototype,e=e.prototype,i=function i(){},r=o.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,c=Function.prototype.toString,l=function l(e){try{return c.call(e),!0}catch(t){return!1}},s=e.slice,u=e.concat,d=e.push,o=Math.max,h=this;if(!function y(e){return"function"==typeof e&&(a?l(e):"[object Function]"===(e=r.call(e))||"[object GeneratorFunction]"===e)}(h))throw new TypeError("Function.prototype.bind called on incompatible "+h);for(var p,m=s.call(arguments,1),f=o(0,h.length-m.length),b=[],g=0;g<f;g++)d.call(b,"$"+g);return p=Function("binder","return function ("+b.join(",")+"){ return binder.apply(this, arguments); }")(function(){var e;return this instanceof p?(e=h.apply(this,u.call(m,s.call(arguments))),n(e)===e?e:this):h.apply(t,u.call(m,s.call(arguments)))}),h.prototype&&(i.prototype=h.prototype,p.prototype=new i,i.prototype=null),p}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{})},("object"!=typeof e||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define("GOVUKFrontend",o):o();function i(e){this.$module=e,this.debounceFormSubmitTimer=null}function r(e){this.$module=e}i.prototype.handleKeyDown=function(e){var t=e.target;"button"===t.getAttribute("role")&&32===e.keyCode&&(e.preventDefault(),t.click())},i.prototype.debounce=function(e){var t=e.target;if("true"===t.getAttribute("data-prevent-double-click"))return this.debounceFormSubmitTimer?(e.preventDefault(),!1):void(this.debounceFormSubmitTimer=setTimeout(function(){this.debounceFormSubmitTimer=null}.bind(this),1e3))},i.prototype.init=function(){this.$module.addEventListener("keydown",this.handleKeyDown),this.$module.addEventListener("click",this.debounce)},r.prototype.init=function(){this.$module&&(window.addEventListener("hashchange",()=>this.showActiveGuide()),this.showActiveGuide({handleNotFound:!0}),this.$module.classList.add("lbcamden-guide-content--loaded"))},r.prototype.showActiveGuide=function({handleNotFound:e}={}){if(this.$module){window.location.hash||window.history.replaceState(null,null,window.location.pathname+window.location.search);var t=this.getArticles(),n=this.getActiveItem();if(e||n){for(const o of t)this.setArticleVisibility(o,o===n);n?(e=this.getNotFoundArticle(),this.setArticleVisibility(e,!1,{hiddenAttr:!0})):(e=this.getNotFoundArticle(),this.setArticleVisibility(e,!0,{setContent:c,setHeading:a,setPagination:{next:t[0]},hiddenAttr:!0})),window.scrollTo({top:0,behavior:"instant"})}}},r.prototype.setPagination=function({next:e,prev:t}){var[n,o]=this.getPaginationTargets();n.querySelector(".govuk-pagination__link-label").innerText=t&&l(t),o.querySelector(".govuk-pagination__link-label").innerText=e&&l(e),n.querySelector(".govuk-pagination__link").href=t&&"#"+t.dataset.guideArticle,o.querySelector(".govuk-pagination__link").href=e&&"#"+e.dataset.guideArticle,this.$module.classList.toggle("lbcamden-guide-content--prev",!!t),this.$module.classList.toggle("lbcamden-guide-content--next",!!e)},r.prototype.setArticleVisibility=function(e,t,{setPagination:n,setContent:o,setHeading:i,hiddenAttr:r}={}){var a,c,l,s=e.querySelector(".lbcamden-guide-content__item");t&&(c=(l=this.getArticles()).indexOf(e),a=l[c-1],c=l[c+1],s&&o&&(s.innerHTML=o),i&&(l=e.querySelector("h2"))&&(l.innerText=i),this.setPagination(n||{next:c,prev:a})),r?e.hidden=!t:e.classList.toggle("lbcamden-guide-content--hidden",!t)},r.prototype.getArticles=function(){return Array.from(this.$module.querySelectorAll("[data-guide-article]"))},r.prototype.getActiveItem=function(){var e=this.getArticles(),t=window.location.hash.substring(1);if(!t)return e[0];for(const n of e)if(n.dataset.guideArticle===t)return n},r.prototype.getPaginationTargets=function(){return[this.$module.querySelector(".govuk-pagination__prev"),this.$module.querySelector(".govuk-pagination__next")]},r.prototype.getNotFoundArticle=function(){return this.$module.querySelector("[data-guide-not-found]")};const a="Sorry, this content has been moved or deleted.",c="<p>Try navigating the topic or search the site.</p>";function l(e){e=e.querySelector("[data-guide-heading]");return e&&e.innerText}function s(e){this.$module=e}function u(e){this.$module=e,this.$navigationToggle=this.$module.querySelector(".lbcamden-header__navigation-top-toggle-button"),this.$navigationMenu=this.$module.querySelector(".lbcamden-header__navigation-items"),this.$searchToggle=this.$module.querySelector(".lbcamden-header__search-toggle-button"),this.$searchMenu=this.$module.querySelector(".lbcamden-header__search-items"),this.$emergencyBanner=this.$module.querySelector(".lbcamden-header__emergency-banner"),this.$buttons=this.$module.querySelectorAll("button[aria-controls][data-toggle-mobile-group][data-toggle-desktop-group]"),this.$menuButtons=this.$module.querySelectorAll(".lbcamden-header__navigation-item--with-children"),this.$phaseBanner=document.querySelector(".govuk-phase-banner"),this.$navContainer=this.$module.children[0],this.hiddenButtons=this.$module.querySelectorAll("button[hidden]"),this.$contentShiftContainer=this.$module.querySelector(".lbcamden-header__bar")||this.$module,this.menuOpen=!1,this.searchOpen=!1,this.lastWindowSize=null}s.prototype.init=function(){this.$module&&(window.addEventListener("hashchange",()=>this.updateActiveLink()),this.updateActiveLink({handleNotFound:!0}))},s.prototype.updateActiveLink=function({handleNotFound:e}={}){if(e||this.$module.querySelector(`[href="${window.location.hash}"]`)){var t,n=!window.location.hash||"#"===window.location.hash;let e=0;for(const o of this.getLinks())0===e&&n?o.classList.toggle(":active",!0):(t=new URL(o.href,window.location.href),t=!n&&t.href===window.location.href,o.classList.toggle(":active",t)),e+=1}},s.prototype.getLinks=function(){return this.$module.querySelectorAll(".govuk-link")},u.prototype.init=function(){this.$module&&(this.$module.classList.add("js-module-initialised"),"function"==typeof window.matchMedia)&&this.setupResponsiveChecks()},u.prototype.setupResponsiveChecks=function(){this.mql=window.matchMedia("(min-width: "+t.desktop+")"),this.mql.addListener(this.checkMode.bind(this)),this.checkMode()},u.prototype.checkMode=function(){this.mql.matches?(this.teardownMobileMenu(),this.setupDesktopMenu()):(this.teardownDesktopMenu(),this.setupMobileMenu())},u.prototype.setupMobileMenu=function(){this.setAttributes("mobile"),null!=this.$navigationMenu&&(this.$navigationToggle.boundMenuClick=this.handleMenuButtonClick.bind(this),this.$navigationToggle.addEventListener("click",this.$navigationToggle.boundMenuClick,!0)),null!=this.$searchMenu&&(this.$searchToggle.boundSearchClick=this.handleSearchButtonClick.bind(this),this.$searchToggle.addEventListener("click",this.$searchToggle.boundSearchClick,!0))},u.prototype.teardownMobileMenu=function(){this.unsetAttributes("mobile"),null!=this.$navigationMenu&&this.$navigationToggle.removeEventListener("click",this.$navigationToggle.boundMenuClick,!0),null!=this.$searchMenu&&this.$searchToggle.removeEventListener("click",this.$searchToggle.boundSearchClick,!0)},u.prototype.setupDesktopMenu=function(){this.setAttributes("desktop"),null!=this.$searchMenu&&(this.$searchToggle.boundSearchClick=this.handleSearchButtonClick.bind(this),this.$searchToggle.addEventListener("click",this.$searchToggle.boundSearchClick,!0))},u.prototype.teardownDesktopMenu=function(){this.unsetAttributes("desktop"),null!=this.$navigationMenu&&this.$navigationToggle.removeEventListener("click",this.$navigationToggle.boundMenuClick,!0),null!=this.$searchMenu&&this.$searchToggle.removeEventListener("click",this.$searchToggle.boundSearchClick,!0)},u.prototype.menuItemClick=function(e){let t=e.target.getAttribute("aria-controls");(null==t?(t=e.target.parentNode.getAttribute("aria-controls"),e.target.parentNode):e.target).classList.toggle("lbcamden-header__open-button"),this.$module.querySelectorAll(".lbcamden-header__navigation-second-toggle-button:not([aria-controls="+t+"])").forEach(e=>e.classList.remove("lbcamden-header__open-button"));e=document.getElementById(t);!0===this.mql.matches&&this.$module.querySelectorAll(".lbcamden-header__navigation-dropdown-menu:not(#"+t+")").forEach(e=>e.setAttribute("hidden",!0)),null!=document.getElementById(t).getAttribute("hidden")?document.getElementById(t).removeAttribute("hidden"):document.getElementById(t).setAttribute("hidden","true"),!0===this.mql.matches&&this.menuContentShift(e.offsetHeight),null!=this.$searchMenu&&this.closeSearch(this.$searchToggle,this.$searchMenu)},u.prototype.menuContentShift=function(e){this.$emergencyBanner?this.$emergencyBanner.style.marginTop=e+"px":this.$contentShiftContainer.style.marginBottom=e+"px"},u.prototype.setAttributes=function(e){"mobile"===e&&null!=this.$navigationMenu&&(this.$navigationToggle.removeAttribute("hidden"),this.$navigationToggle.setAttribute("aria-expanded",!1),this.$navigationMenu.setAttribute("hidden",!0)),null!=this.$searchMenu&&(this.$searchMenu.setAttribute("hidden",!0),this.$searchToggle.setAttribute("aria-expanded",!1),this.$searchToggle.setAttribute("aria-label","Show search menu"),this.$module.querySelector(".lbcamden-header__search-item-link").setAttribute("hidden",!0),this.$module.querySelector(".lbcamden-header__search-and-popular").removeAttribute("hidden"),this.$searchToggle.removeAttribute("hidden")),n(this.$menuButtons,function(e){e.querySelector(".lbcamden-header__navigation-item-link").setAttribute("hidden",!0),e.querySelector(".lbcamden-header__navigation-second-toggle-button").removeAttribute("hidden"),e.boundMenuItemClick=this.menuItemClick.bind(this),e.querySelector("button").addEventListener("click",e.boundMenuItemClick,!0)}.bind(this))},u.prototype.unsetAttributes=function(e){"mobile"===e&&(null!=this.$navigationMenu&&(this.$navigationToggle.setAttribute("hidden",!0),this.$navigationMenu.removeAttribute("hidden")),null!=this.$searchMenu)&&(this.$searchToggle.setAttribute("hidden",!0),this.$searchMenu.removeAttribute("hidden")),this.$module.style.marginBottom="0px",this.searchOpen=!1,this.menuOpen=!1,null!=this.$navigationMenu&&this.closeDesktopMenus(),null!=this.$searchMenu&&this.$searchToggle.classList.remove("lbcamden-header__open-button"),n(this.$menuButtons,function(e){e.querySelector("button").removeEventListener("click",e.boundMenuItemClick,!0)})},u.prototype.handleMenuButtonClick=function(){!0===this.menuOpen?this.closeMenu(this.$navigationToggle,this.$navigationMenu):this.openMenu(this.$navigationToggle,this.$navigationMenu)},u.prototype.handleSearchButtonClick=function(){!0===this.searchOpen?(this.closeSearch(this.$searchToggle,this.$searchMenu),!0===this.mql.matches&&(this.$module.style.marginBottom="0",this.menuContentShift(0))):(this.openSearch(this.$searchToggle,this.$searchMenu),!0===this.mql.matches&&this.menuContentShift(this.$searchMenu.offsetHeight))},u.prototype.openMenu=function(e,t){this.menuOpen=!0,e.classList.add("lbcamden-header__open-button"),e.setAttribute("aria-expanded",!0),e.setAttribute("aria-label","Hide navigation menu"),e.classList.add("lbcamden-header__open-button"),t.removeAttribute("hidden"),null!=this.$searchMenu&&this.closeSearch(this.$searchToggle,this.$searchMenu)},u.prototype.closeMenu=function(e,t){this.menuOpen=!1,this.menuContentShift(0),null!=this.$navigationMenu&&(e.classList.remove("lbcamden-header__open-button"),e.setAttribute("aria-expanded",!1),e.setAttribute("aria-label","Show navigation menu"),e.classList.remove("lbcamden-header__open-button"),t.setAttribute("hidden",!0))},u.prototype.closeDesktopMenus=function(){this.$module.querySelectorAll(".lbcamden-header__navigation-dropdown-menu").forEach(e=>e.setAttribute("hidden",!0))},u.prototype.openSearch=function(e,t){this.searchOpen=!0,e.setAttribute("aria-expanded",!0),e.setAttribute("aria-label","Hide navigation menu"),this.$module.querySelectorAll(".lbcamden-header__open-button").forEach(e=>e.classList.remove("lbcamden-header__open-button")),e.classList.add("lbcamden-header__open-button"),t.style.top=this.$navContainer.offsetHeight+"px",t.removeAttribute("hidden"),!0!==this.mql.matches?this.closeMenu(this.$navigationToggle,this.$navigationMenu):this.closeDesktopMenus()},u.prototype.closeSearch=function(e,t){this.searchOpen=!1,e.setAttribute("aria-expanded",!1),e.setAttribute("aria-label","Show navigation menu"),e.classList.remove("lbcamden-header__open-button"),t.setAttribute("hidden",!0)},e.initAll=function(e){n((e="undefined"!=typeof(e=void 0!==e?e:{}).scope?e.scope:document).querySelectorAll('[data-module="lbcamden-header"]'),function(e){new u(e).init()});var t=e.querySelectorAll('[data-module="lbcamden-button"]'),t=(n(t,function(e){new i(e).init()}),e.querySelectorAll('[data-module="lbcamden-guide-content"]')),t=(n(t,function(e){new r(e).init()}),e.querySelectorAll('[data-module="lbcamden-guide-header"]'));n(t,function(e){new s(e).init()})},e.LBCamdenButton=i,e.LBCamdenGuideContent=r,e.LBCamdenGuideHeader=s,e.LBCamdenHeader=u});
