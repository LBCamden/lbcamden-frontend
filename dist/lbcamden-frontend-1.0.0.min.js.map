{"version":3,"file":"lbcamden-frontend-1.0.0.min.js","sources":["../src/lbcamden/index.html?html-proxy&index=0.js","../src/lbcamden/common.js","../src/lbcamden/components/button/button.js","../src/lbcamden/components/guide-content/guide-content.js","../src/lbcamden/components/guide-header/guide-header.js","../src/lbcamden/components/header/header.js","../src/lbcamden/all.js","../src/lbcamden/index.html?html-proxy&index=1.js"],"sourcesContent":["\n      import * as GOVUK from '/govuk-frontend.min.js'\n      GOVUK.initAll();\n    ","/**\n * TODO: Ideally this would be a NodeList.prototype.forEach polyfill\n * This seems to fail in IE8, requires more investigation.\n * See: https://github.com/imagitama/nodelist-foreach-polyfill\n */\nexport function nodeListForEach (nodes, callback) {\n  if (window.NodeList.prototype.forEach) {\n    return nodes.forEach(callback)\n  }\n  for (var i = 0; i < nodes.length; i++) {\n    callback.call(window, nodes[i], i, nodes)\n  }\n}\n\n// Used to generate a unique string, allows multiple instances of the component without\n// Them conflicting with each other.\n// https://stackoverflow.com/a/8809472\nexport function generateUniqueID () {\n  var d = new Date().getTime()\n  if (typeof window.performance !== 'undefined' && typeof window.performance.now === 'function') {\n    d += window.performance.now() // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16)\n  })\n}\n\nexport const settings = {\n  minWidth: '40.0625em',\n  desktop: '48em'\n}\n","// AW: Removing these polyfills to avoid CJS build issues. I believe they aren't needed if we don't support IE10 anymore\n\n// import '../../vendor/polyfills/Event' // addEventListener and event.target normaliziation\n// import '../../vendor/polyfills/Function/prototype/bind'\n\nvar DEBOUNCE_TIMEOUT_IN_SECONDS = 1\n\nfunction Button ($module) {\n  this.$module = $module\n  this.debounceFormSubmitTimer = null\n}\n\n/**\n* JavaScript 'shim' to trigger the click event of element(s) when the space key is pressed.\n*\n* Created since some Assistive Technologies (for example some Screenreaders)\n* will tell a user to press space on a 'button', so this functionality needs to be shimmed\n* See https://github.com/alphagov/govuk_elements/pull/272#issuecomment-233028270\n*\n* @param {object} event event\n*/\nButton.prototype.handleKeyDown = function (event) {\n  // get the target element\n  var target = event.target\n  // if the element has a role='button' and the pressed key is a space, we'll simulate a click\n  if (target.getAttribute('role') === 'button' && event.key === 'Space') {\n    event.preventDefault()\n    // trigger the target's click event\n    target.click()\n  }\n}\n\n/**\n* If the click quickly succeeds a previous click then nothing will happen.\n* This stops people accidentally causing multiple form submissions by\n* double clicking buttons.\n*/\nButton.prototype.debounce = function (event) {\n  var target = event.target\n  // Check the button that is clicked on has the preventDoubleClick feature enabled\n  if (target.getAttribute('data-prevent-double-click') !== 'true') {\n    return\n  }\n\n  // If the timer is still running then we want to prevent the click from submitting the form\n  if (this.debounceFormSubmitTimer) {\n    event.preventDefault()\n    return false\n  }\n\n  this.debounceFormSubmitTimer = setTimeout(function () {\n    this.debounceFormSubmitTimer = null\n  }.bind(this), DEBOUNCE_TIMEOUT_IN_SECONDS * 1000)\n}\n\n/**\n* Initialise an event listener for keydown at document level\n* this will help listening for later inserted elements with a role=\"button\"\n*/\nButton.prototype.init = function () {\n  this.$module.addEventListener('keydown', this.handleKeyDown)\n  this.$module.addEventListener('click', this.debounce)\n}\n\nexport default Button\n","export default function LBCamdenGuideContent ($module) {\n  this.$module = $module\n}\n\nLBCamdenGuideContent.prototype.init = function () {\n  if (!this.$module) {\n    return\n  }\n\n  window.addEventListener('hashchange', () => this.showActiveGuide())\n  this.showActiveGuide({ handleNotFound: true })\n  this.$module.classList.add('lbcamden-guide-content--loaded')\n}\n\nLBCamdenGuideContent.prototype.showActiveGuide = function ({ handleNotFound } = {}) {\n  if (!this.$module) return\n\n  if (!window.location.hash) {\n    window.history.replaceState(null, null, window.location.pathname + window.location.search)\n  }\n\n  const articles = this.getArticles()\n  const activeItem = this.getActiveItem()\n\n  // This is needed to prevent internal navigation by anchor links (most importantly, \"skip to main content\")\n  // from navigating to a 'not found' view\n  if (!handleNotFound && !activeItem) {\n    return\n  }\n\n  for (const item of articles) {\n    this.setArticleVisibility(item, item === activeItem)\n  }\n\n  if (activeItem) {\n    const notFoundContent = this.getNotFoundArticle()\n    this.setArticleVisibility(notFoundContent, false, {\n      hiddenAttr: true\n    })\n  } else {\n    const notFoundContent = this.getNotFoundArticle()\n\n    this.setArticleVisibility(notFoundContent, true, {\n      setContent: DEFAULT_NOT_FOUND_CONTENT,\n      setHeading: DEFAULT_NOT_FOUND_HEADING,\n      setPagination: { next: articles[0] },\n      hiddenAttr: true\n    })\n  }\n\n  window.scrollTo({ top: 0, behavior: 'instant' })\n}\n\nLBCamdenGuideContent.prototype.setPagination = function ({ next, prev }) {\n  const [prevTarget, nextTarget] = this.getPaginationTargets()\n\n  prevTarget.querySelector('.govuk-pagination__link-label').innerText = prev && getHeading(prev)\n  nextTarget.querySelector('.govuk-pagination__link-label').innerText = next && getHeading(next)\n\n  prevTarget.querySelector('.govuk-pagination__link').href = prev && `#${prev.dataset.guideArticle}`\n  nextTarget.querySelector('.govuk-pagination__link').href = next && `#${next.dataset.guideArticle}`\n\n  this.$module.classList.toggle('lbcamden-guide-content--prev', !!prev)\n  this.$module.classList.toggle('lbcamden-guide-content--next', !!next)\n}\n\nLBCamdenGuideContent.prototype.setArticleVisibility = function (article, visible, { setPagination, setContent, setHeading, hiddenAttr } = {}) {\n  const content = article.querySelector('.lbcamden-guide-content__item')\n\n  if (visible) {\n    const articles = this.getArticles()\n    const i = articles.indexOf(article)\n\n    const prev = articles[i - 1]\n    const next = articles[i + 1]\n\n    if (content && setContent) {\n      content.innerHTML = setContent\n    }\n\n    if (setHeading) {\n      const h2 = article.querySelector('h2')\n\n      if (h2) {\n        h2.innerText = setHeading\n      }\n    }\n\n    this.setPagination(setPagination || { next, prev })\n  }\n\n  if (hiddenAttr) {\n    article.hidden = !visible\n  } else {\n    article.classList.toggle('lbcamden-guide-content--hidden', !visible)\n  }\n}\n\nLBCamdenGuideContent.prototype.getArticles = function () {\n  return Array.from(this.$module.querySelectorAll('[data-guide-article]'))\n}\n\nLBCamdenGuideContent.prototype.getActiveItem = function () {\n  const targets = this.getArticles()\n  const id = window.location.hash.substring(1)\n\n  if (!id) {\n    return targets[0]\n  }\n\n  for (const t of targets) {\n    if (t.dataset.guideArticle === id) {\n      return t\n    }\n  }\n}\n\nLBCamdenGuideContent.prototype.getPaginationTargets = function () {\n  return [\n    this.$module.querySelector('.govuk-pagination__prev'),\n    this.$module.querySelector('.govuk-pagination__next')\n  ]\n}\n\nLBCamdenGuideContent.prototype.getNotFoundArticle = function () {\n  return this.$module.querySelector('[data-guide-not-found]')\n}\n\nconst DEFAULT_NOT_FOUND_HEADING = 'Sorry, this content has been moved or deleted.'\nconst DEFAULT_NOT_FOUND_CONTENT = '<p>Try navigating the topic or search the site.</p>'\n\nfunction getHeading (content) {\n  const heading = content.querySelector('[data-guide-heading]')\n  return heading && heading.innerText\n}\n","export default function LBCamdenGuideHeader ($module) {\n  this.$module = $module\n}\n\nLBCamdenGuideHeader.prototype.init = function () {\n  if (!this.$module) {\n    return\n  }\n\n  window.addEventListener('hashchange', () => this.updateActiveLink())\n  this.updateActiveLink({ handleNotFound: true })\n}\n\nLBCamdenGuideHeader.prototype.updateActiveLink = function ({ handleNotFound } = {}) {\n  // This is needed to prevent internal navigation by anchor links (most importantly, \"skip to main content\")\n  // from navigating to a 'not found' view\n  if (!handleNotFound) {\n    if (!this.$module.querySelector(`[href=\"${window.location.hash}\"]`)) {\n      return\n    }\n  }\n\n  const isEmptyHash = !window.location.hash || window.location.hash === '#'\n  let i = 0\n\n  for (const link of this.getLinks()) {\n    if (i === 0 && isEmptyHash) {\n      link.classList.toggle(':active', true)\n    } else {\n      const fullUrl = new URL(link.href, window.location.href)\n      const isActive = !isEmptyHash && fullUrl.href === window.location.href\n\n      link.classList.toggle(':active', isActive)\n    }\n\n    i += 1\n  }\n}\n\nLBCamdenGuideHeader.prototype.getLinks = function () {\n  return this.$module.querySelectorAll('.govuk-link')\n}\n","import { nodeListForEach, settings } from '../../common'\n\nfunction LBCamdenHeader ($module) {\n  this.$module = $module\n  this.$navigationToggle = this.$module.querySelector('.lbcamden-header__navigation-top-toggle-button')\n  this.$navigationMenu = this.$module.querySelector('.lbcamden-header__navigation-items')\n  this.$searchToggle = this.$module.querySelector('.lbcamden-header__search-toggle-button')\n  this.$searchMenu = this.$module.querySelector('.lbcamden-header__search-items')\n  this.$emergencyBanner = this.$module.querySelector('.lbcamden-header__emergency-banner')\n  this.$buttons = this.$module.querySelectorAll('button[aria-controls][data-toggle-mobile-group][data-toggle-desktop-group]')\n  this.$menuButtons = this.$module.querySelectorAll('.lbcamden-header__navigation-item--with-children')\n  this.$phaseBanner = document.querySelector('.govuk-phase-banner')\n  this.$navContainer = this.$module.children[0]\n  // this.$menuButtons = this.$module.querySelectorAll('.lbcamden-header__navigation-second-toggle-button')\n  this.hiddenButtons = this.$module.querySelectorAll('button[hidden]')\n  this.$contentShiftContainer = this.$module.querySelector('.lbcamden-header__bar') || this.$module\n  this.menuOpen = false\n  this.searchOpen = false\n  this.lastWindowSize = null\n}\n\nLBCamdenHeader.prototype.init = function () {\n  if (!this.$module) {\n    return\n  }\n  this.$module.classList.add('js-module-initialised')\n  if (typeof window.matchMedia === 'function') {\n    this.setupResponsiveChecks()\n  }\n}\n\nLBCamdenHeader.prototype.setupResponsiveChecks = function () {\n  this.mql = window.matchMedia('(min-width: ' + settings.desktop + ')')\n  this.mql.addListener(this.checkMode.bind(this))\n  this.checkMode()\n}\n\nLBCamdenHeader.prototype.checkMode = function () {\n  if (this.mql.matches) {\n    this.teardownMobileMenu()\n    this.setupDesktopMenu()\n  } else {\n    this.teardownDesktopMenu()\n    this.setupMobileMenu()\n  }\n}\n\nLBCamdenHeader.prototype.setupMobileMenu = function () {\n  this.setAttributes('mobile')\n  if (this.$navigationMenu != null) {\n    this.$navigationToggle.boundMenuClick = this.handleMenuButtonClick.bind(this)\n    this.$navigationToggle.addEventListener('click', this.$navigationToggle.boundMenuClick, true)\n  }\n  if (this.$searchMenu != null) {\n    this.$searchToggle.boundSearchClick = this.handleSearchButtonClick.bind(this)\n    this.$searchToggle.addEventListener('click', this.$searchToggle.boundSearchClick, true)\n  }\n}\n\nLBCamdenHeader.prototype.teardownMobileMenu = function () {\n  this.unsetAttributes('mobile')\n  if (this.$navigationMenu != null) {\n    this.$navigationToggle.removeEventListener('click', this.$navigationToggle.boundMenuClick, true)\n  }\n  if (this.$searchMenu != null) {\n    this.$searchToggle.removeEventListener('click', this.$searchToggle.boundSearchClick, true)\n  }\n}\n\nLBCamdenHeader.prototype.setupDesktopMenu = function () {\n  this.setAttributes('desktop')\n  if (this.$searchMenu != null) {\n    this.$searchToggle.boundSearchClick = this.handleSearchButtonClick.bind(this)\n    this.$searchToggle.addEventListener('click', this.$searchToggle.boundSearchClick, true)\n  }\n}\n\nLBCamdenHeader.prototype.teardownDesktopMenu = function () {\n  this.unsetAttributes('desktop')\n  if (this.$navigationMenu != null) {\n    this.$navigationToggle.removeEventListener('click', this.$navigationToggle.boundMenuClick, true)\n  }\n  if (this.$searchMenu != null) {\n    this.$searchToggle.removeEventListener('click', this.$searchToggle.boundSearchClick, true)\n  }\n}\n\nLBCamdenHeader.prototype.menuItemClick = function (e) {\n  let theTargetID = e.target.getAttribute('aria-controls')\n  if (theTargetID == null) {\n    theTargetID = e.target.parentNode.getAttribute('aria-controls')\n    e.target.parentNode.classList.toggle('lbcamden-header__open-button')\n  } else {\n    e.target.classList.toggle('lbcamden-header__open-button')\n  }\n\n  this.$module.querySelectorAll('.lbcamden-header__navigation-second-toggle-button:not([aria-controls=' + theTargetID + '])').forEach(i => i.classList.remove('lbcamden-header__open-button'))\n\n  const theTarget = document.getElementById(theTargetID)\n\n  // AW: Only close other sub-menus when in desktop mode\n  if (this.mql.matches === true) {\n    this.$module.querySelectorAll('.lbcamden-header__navigation-dropdown-menu:not(#' + theTargetID + ')').forEach(i => i.setAttribute('hidden', true))\n  }\n\n  document.getElementById(theTargetID).getAttribute('hidden') != null ? document.getElementById(theTargetID).removeAttribute('hidden') : document.getElementById(theTargetID).setAttribute('hidden', 'true')\n\n  if (this.mql.matches === true) {\n    this.menuContentShift(theTarget.offsetHeight)\n  }\n  if (this.$searchMenu != null) {\n    this.closeSearch(this.$searchToggle, this.$searchMenu)\n  }\n}\n\nLBCamdenHeader.prototype.menuContentShift = function (offsetPixels) {\n  if (this.$emergencyBanner) {\n    this.$emergencyBanner.style.marginTop = offsetPixels + 'px'\n  } else {\n    this.$contentShiftContainer.style.marginBottom = offsetPixels + 'px'\n  }\n}\n\nLBCamdenHeader.prototype.setAttributes = function ($type) {\n  if ($type === 'mobile') {\n    if (this.$navigationMenu != null) {\n      this.$navigationToggle.removeAttribute('hidden')\n      this.$navigationToggle.setAttribute('aria-expanded', false)\n      this.$navigationMenu.setAttribute('hidden', true)\n    }\n  }\n  if (this.$searchMenu != null) {\n    this.$searchMenu.setAttribute('hidden', true)\n    this.$searchToggle.setAttribute('aria-expanded', false)\n    this.$searchToggle.setAttribute('aria-label', 'Show search menu')\n    this.$module.querySelector('.lbcamden-header__search-item-link').setAttribute('hidden', true)\n    this.$module.querySelector('.lbcamden-header__search-and-popular').removeAttribute('hidden')\n    this.$searchToggle.removeAttribute('hidden')\n  }\n  nodeListForEach(this.$menuButtons, function ($button) {\n    $button.querySelector('.lbcamden-header__navigation-item-link').setAttribute('hidden', true)\n    $button.querySelector('.lbcamden-header__navigation-second-toggle-button').removeAttribute('hidden')\n    // Save bounded functions to use when removing event listeners during teardown\n    $button.boundMenuItemClick = this.menuItemClick.bind(this)\n    // Handle events\n    $button.querySelector('button').addEventListener('click', $button.boundMenuItemClick, true)\n  }.bind(this))\n}\n\nLBCamdenHeader.prototype.unsetAttributes = function ($type) {\n  if ($type === 'mobile') {\n    if (this.$navigationMenu != null) {\n      this.$navigationToggle.setAttribute('hidden', true)\n      this.$navigationMenu.removeAttribute('hidden')\n    }\n    if (this.$searchMenu != null) {\n      this.$searchToggle.setAttribute('hidden', true)\n      this.$searchMenu.removeAttribute('hidden')\n    }\n  }\n  this.$module.style.marginBottom = '0px'\n  this.searchOpen = false\n  this.menuOpen = false\n  if (this.$navigationMenu != null) {\n    this.closeDesktopMenus()\n  }\n  if (this.$searchMenu != null) {\n    this.$searchToggle.classList.remove('lbcamden-header__open-button')\n  }\n  nodeListForEach(this.$menuButtons, function ($button) {\n    $button.querySelector('button').removeEventListener('click', $button.boundMenuItemClick, true)\n  })\n}\n\nLBCamdenHeader.prototype.handleMenuButtonClick = function () {\n  if (this.menuOpen === true) {\n    this.closeMenu(this.$navigationToggle, this.$navigationMenu)\n  } else {\n    this.openMenu(this.$navigationToggle, this.$navigationMenu)\n  }\n}\n\nLBCamdenHeader.prototype.handleSearchButtonClick = function () {\n  if (this.searchOpen === true) {\n    this.closeSearch(this.$searchToggle, this.$searchMenu)\n\n    if (this.mql.matches === true) {\n      this.$module.style.marginBottom = '0'\n      this.menuContentShift(0)\n    }\n  } else {\n    this.openSearch(this.$searchToggle, this.$searchMenu)\n\n    if (this.mql.matches === true) {\n      this.menuContentShift(this.$searchMenu.offsetHeight)\n    }\n  }\n}\n\nLBCamdenHeader.prototype.openMenu = function ($button, $target) {\n  this.menuOpen = true\n  $button.classList.add('lbcamden-header__open-button')\n  $button.setAttribute('aria-expanded', !0)\n  $button.setAttribute('aria-label', 'Hide navigation menu')\n  $button.classList.add('lbcamden-header__open-button')\n  $target.removeAttribute('hidden')\n  if (this.$searchMenu != null) {\n    this.closeSearch(this.$searchToggle, this.$searchMenu)\n  }\n}\n\nLBCamdenHeader.prototype.closeMenu = function ($button, $target) {\n  this.menuOpen = false\n  this.menuContentShift(0)\n  if (this.$navigationMenu != null) {\n    $button.classList.remove('lbcamden-header__open-button')\n    $button.setAttribute('aria-expanded', !1)\n    $button.setAttribute('aria-label', 'Show navigation menu')\n    $button.classList.remove('lbcamden-header__open-button')\n    $target.setAttribute('hidden', !0)\n  }\n}\n\nLBCamdenHeader.prototype.closeDesktopMenus = function () {\n  this.$module.querySelectorAll('.lbcamden-header__navigation-dropdown-menu').forEach(x => x.setAttribute('hidden', true))\n}\n\nLBCamdenHeader.prototype.openSearch = function ($button, $target) {\n  this.searchOpen = true\n  $button.setAttribute('aria-expanded', !0)\n  $button.setAttribute('aria-label', 'Hide navigation menu')\n  this.$module.querySelectorAll('.lbcamden-header__open-button').forEach(x => x.classList.remove('lbcamden-header__open-button'))\n  $button.classList.add('lbcamden-header__open-button')\n  $target.style.top = this.$navContainer.offsetHeight + 'px'\n  $target.removeAttribute('hidden')\n  // document.getElementById('lbs-search__box').focus()\n  if (this.mql.matches !== true) {\n    this.closeMenu(this.$navigationToggle, this.$navigationMenu)\n  } else {\n    this.closeDesktopMenus()\n  }\n}\n\nLBCamdenHeader.prototype.closeSearch = function ($button, $target) {\n  this.searchOpen = false\n  $button.setAttribute('aria-expanded', !1)\n  $button.setAttribute('aria-label', 'Show navigation menu')\n  $button.classList.remove('lbcamden-header__open-button')\n  $target.setAttribute('hidden', !0)\n}\n\nexport default LBCamdenHeader\n","import { nodeListForEach } from './common'\nimport LBCamdenButton from './components/button/button'\nimport LBCamdenGuideContent from './components/guide-content/guide-content'\nimport LBCamdenGuideHeader from './components/guide-header/guide-header'\nimport LBCamdenHeader from './components/header/header'\n\nimport './all.scss'\n\nfunction initAll (options) {\n  options = typeof options !== 'undefined' ? options : {}\n\n  // Allow the user to initialise GOV.UK Frontend in only certain sections of the page\n  // Defaults to the entire document if nothing is set.\n  var scope = typeof options.scope !== 'undefined' ? options.scope : document\n\n  var $LBCamdenHeaders = scope.querySelectorAll('[data-module=\"lbcamden-header\"]')\n  nodeListForEach($LBCamdenHeaders, function ($LBCamdenHeader) {\n    new LBCamdenHeader($LBCamdenHeader).init()\n  })\n\n  var $LBCamdenButtons = scope.querySelectorAll('[data-module=\"lbcamden-button\"]')\n  nodeListForEach($LBCamdenButtons, function ($LBCamdenButton) {\n    new LBCamdenButton($LBCamdenButton).init()\n  })\n\n  var $LBCamdenGuideContents = scope.querySelectorAll('[data-module=\"lbcamden-guide-content\"]')\n  nodeListForEach($LBCamdenGuideContents, function ($LBCamdenGuideContent) {\n    new LBCamdenGuideContent($LBCamdenGuideContent).init()\n  })\n\n  var $LBCamdenGuideHeaders = scope.querySelectorAll('[data-module=\"lbcamden-guide-header\"]')\n  nodeListForEach($LBCamdenGuideHeaders, function ($LBCamdenGuideHeader) {\n    new LBCamdenGuideHeader($LBCamdenGuideHeader).init()\n  })\n}\n\nexport {\n  LBCamdenButton,\n  LBCamdenGuideContent,\n  LBCamdenGuideHeader,\n  LBCamdenHeader,\n  initAll\n}\n","\n      import * as LBCamden from './all.js';\n      LBCamden.initAll();\n    "],"names":["LBCamdenButton","LBCamden.initAll"],"mappings":"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"}